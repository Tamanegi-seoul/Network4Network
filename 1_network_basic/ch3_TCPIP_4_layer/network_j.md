# 네트워크(인터넷) 계층 - 준우

<img src="/assets/images/ch3/network-hierarchy-unit.png">

네트워크 계층은 상위 게층으로 전달하기위해 필요한 데이터 전송의 경로를 선택하고, 최적의 경로를 위한 라우팅 프로토콜을 사용한다. 데이터를 전송할 수신 측의 주소를 찾고 수신된 데이터의 주소를 확인하여 전송 계층으로 전달한다.
이 때, 네트워크 계층은 송수신한 데이터를 '패킷'이라는 단위로 결합/재결합하여 전달한다.<br>

<br>
이 계층에서 노드 간 어떤 데이터 단위(what)로 전달이 이루어지는지, 전송 과정에서 어떤 프로토콜(how)을 사용하는지 알아보자.<br>
<br>

---

<br>

## 네트워크에서의 주소

사람을 식별하기 위해 사용되는 주민등록번호는 MAC주소에 해당한다. 그 사람이 이사를 가거나 이동하게 되면 위치에 따라 상대적으로 주소가 결정된다. 이러한 주소를 논리적인 주소(IP)라고 부른다.<br>


`MAC주소`는 물리적으로 기기가 만들어 질 때, 예를 들어 랜카드가 공장에서 만들어질 때 할당되는 고유한 주소를 말한다. 소속된 네트워크가 변경되더라도 변경되지 않는 주소이다. <br><br>

`IP주소`는 어느 네트워크에 속한 어떤 기기인지 식별하는 논리 주소를 말한다. 네트워크 번호와 컴퓨터 번호의 조합으로 만들어지며, 같은 네트워크 내에 중복된 논리 주소를 허용하지 않는다. DHCP등의 기능을 통해 관리된다고 할 수 있다.
IP주소는 컴퓨터 뿐 만 아니라 라우터에도 할당되며, 네트워킹은 호스트-라우터, 라우터-라우터, 라우터-호스트 사이에서 이루어지는 통신을 말한다. 이때 각각의 경계를 `인터페이스`라고 하며, 인터페이스는 각 호스트 또는 라우터가 IP주소를 갖도록 한다. <br><br>

## 라우팅
`라우팅`은 네트워크 내에서 데이터를 전송하기 위해서 최적의 경로를 선택하는 과정을 말한다. 이러한 과정에 네트워크 간 연결을 해주는 것이 라우터이며, 라우터는 연결 뿐 만 아니라 앞서 말한 라우팅 기능을 제공한다.<br>
`라우터`는 IP주소를 보고 데이터의 최종 목적지가 어느 네트워크에 접속해 있는지 판단해서 그 네트워크와 연결된 네트워크의 라우터 중 최적의 경로 상에 위치한 라우터에게 데이터를 전달한다. 즉, 각각의 라우터는 자신의 현재 위치에서 최종 목적지까지 가기 위해 다음으로 어딜 거쳐야 하는지만 결정한다. <br><br>

라우터는 내부적으로 `라우팅 테이블`을 지니고 있으며, 해당 라우터와 연결된 다른 호스트 및 라우터의 주소를 매핑하여 갖고 있다. <br>

### 출발지부터 목적지까지의 경로를 어떻게 탐색할까?
실제로 네트워크 상에서 라우팅에 참여되는 개념은 게이트웨이, 프로토콜, IP주소 체계, 이더넷 등 매우 다양한다. 이 스터디의 목적이 네트워크 엔지니어가 아닌, 주니어 개발자에게 필요한 수준의 네트워크 지식을 목표로 한다. 따라서, 세부적이고 정확한 개념 전달보다 이해를 위한 설명을 위해 비유적으로 풀어가고자 한다. 아래에 이어질 설명은 (이곳)[https://www.youtube.com/watch?v=CjnKNIyREHA]을 참조하였다.<br><br>

네트워크에서 출발지를 시작으로 목적지까지 많은 라우터를 거치게 된다. 그렇다면, 마지막 주소는 알고 있는데 중간의 라우터는 어떻게 알고 최적의 경로를 찾아낼까? 앞서 이야기했듯, 라우터는 해당 라우터에 연결된 다른 라우터 또는 호스트(기기)의 주소를 매핑하여 테이블의 형태로 지니고 있다. 전체 네트워크(WAN)은 작은 여러개의 네트워크(LAN)으로 구성되어 지는데, 라우터와 라우터 사이를 작은 한 개의 네트워크라고 할 수 있다. 이때, 통신으로 전달되는 데이터(패킷)에는 같은 네트워크 내부에서 전달되어야 하는 주소를 포함하며, 다음 네트워크로 이동하면 이전의 목적지 주소를 지우고, 새로운 목표 주소지가 패킷에 추가된다. 이렇게 목적지 주소가 추가/삭제 되면서 최종 목적지에 다다르게 되며, 최종 목적지에 대한 주소는 '대역'을 통해서 구분한다. 12번에서 출발해서 목적지의 대역이 800이라면, 12 -> 100~120 -> 800~900 -> ... 의 식으로 대역폭을 기반으로 이동한다고 할 수 있다.<br>이는 비유적인 표현임을 잊지말자.<br><br>

<img src="/assets/images/ch3/routing-example.png">

<br>
실제 라우팅의 예시를 이해하기 위해 소개하는 예시이다. 네트워크에서 데이터를 송수신하여 전달하는 과정은 현실에서 우편물을 보내고 받는 과정과 매우 흡사하다. '대역폭'은 관할구역으로 표현할 수 있고, 논리 주소는 법정 관할지 주소, 물리 주소는 주소지의 호수 및 거주인으로 할 수 있다. 실제로 울산 신정동에서 발송한 우편물을 서울 신림동에서 수령하는 과정을 캡쳐하여 도식화하였다.<br>







<br>

---

<br>

## 프로토콜 표준화

네트워크 프로토콜은 데이터를 주고 받기 위해(how) 정해진 일종의 규칙을 말한다. 수신측에서 송신된 데이터가 어떤 형식을 따르는지 알 수 없으면 무슨 데이터인지 알 수 없다.<br>
이러한 네트워크 프로토콜은 다양한 기관에서 정의하고 있으며, 표준을 재정한 기관은 다음과 같다. 교양적 앎을 위해 뭐가 있는지 리스트업을 해보았다.<br>

### Standard
- 국제 표준 기구(ISO, International Organization for Standardization)
- 국제 전기 통신 표준화 부문(ITU, International Telecommunication Union-Telecommunication Standardization Sector)
- 미국 국립 표준 기구(ANSI, American National Standards Institute)
- 전기전자 공학자 협회(IEEE, Institute of Electrical and Electronics Engineers)

가장 친숙하게(?) 접할 수 있는 기준은 IEEE의 표준안이다. [이곳](http://www.ktword.co.kr/test/view/view.php?m_temp1=1081)에서 확인할 수 있다.<br>

<br>

### 네트워크 계층의 프로토콜

- IP(Internet Protocol): 비신뢰성, 비연결지향 데이터그램 프로토콜.
- ARP(Address Resolution Protocol): 주소변환 프로토콜. IP주소를 MAC주소로 변환시키는 프로토콜.
- RARP(Reverse ARP): MAC주소로 IP주소를 찾는 프로토콜.
- ICMP(Internet Control Message Protocol): 상태 진단 메시지 프로토콜. ie. ping
- IGMP(Internet Group Message Protocol): 멀티캐스트용 프로토콜


<br>
<br>


- 참조 레퍼런스
    - http://www.ktword.co.kr/test/view/view.php?m_temp1=1081
    - https://net-gate.tistory.com/85
    - https://www.youtube.com/watch?v=CjnKNIyREHA

